<!-- Include layoutHead -->
<%- include('../partials/_layoutHead')%>
  <!-- /Include layoutHead -->



  <!-- include Header -->
  <%- include('../partials/_header')%>
    <!-- include Header -->


    <!-- include single page header -->
    <%- include('../partials/_header2')%>
      <!--/include single page header -->

      <div class="d-flex justify-content-end mt-4 mx-3">
        <button id="sidebarModalToggle" class="btn d-md-none" style="font-weight: 30px;">
          <span class="fa fa-bars text-primary"></span>
        </button>
      </div>
      <div class="container mt-5">
        <div class="row">
          <div class="col-md-3 my-4 d-none d-md-block" id="sidebar">
            <!-- Sidebar/Menu -->
            <div class="list-group">
                <a href="#" class="list-group-item list-group-item-action active" id="profileTab" onclick="showProfile()">My Profile</a>
                <a href="#" class="list-group-item list-group-item-action" id="ordersTab" onclick="showOrders()">My Orders</a>
                <a href="#" class="list-group-item list-group-item-action" id="addressTab" onclick="showAddAddress()">Addresses</a>
                <a href="#" class="list-group-item list-group-item-action" id="passwordTab" onclick="showChangePassword()">Change Password</a>
                <a href="logout" class="list-group-item list-group-item-action">Logout</a>
            </div>
        </div>

          <div id="profile" class="col-md-9 border p-4">
            <div class="myaccount-content">
              <div class="d-flex justify-content-between">
                <h3>Dashboard</h3>
                <!-- Button trigger modal -->
                <button type="button" class="btn" id="editProfileButton">
                  <i class="fa fa-edit fa-lg"></i>
                </button>
              </div>
              <div class="welcome">
                <p>Hello, <strong>Userddf123</strong></p>
              </div>
              <p>From your account dashboard, you can easily check & view your recent orders, manage your shipping and
                billing addresses, and edit your password and account details.</p>
              <div class="welcome">
                <p>Your email: <strong>user123@example.com</strong></p>
                <p>Joined On: <strong>January 1, 2023</strong></p>
                <p>Phone: <strong>123-456-7890</strong></p>
              </div>
            </div>

            <!-- Modal -->
            <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel"
              aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <form id="editProfileForm" action="/editprofile" method="post">
                    <div class="modal-body">
                      <div class="form-group">
                        <label for="editUsername">Username</label>
                        <input type="text" class="form-control" name="userName" id="editUsername" value="User123">
                      </div>
                      <div class="form-group">
                        <label for="editEmail">Email</label>
                        <input type="text" name="email" class="form-control" id="editEmail" value="user123@example.com">
                        <small id="emailError" class="error text-danger font-weight-bold"></small>
                      </div>
                      <div class="form-group">
                        <label for="editPhone">Phone</label>
                        <input type="tel" name="phone" class="form-control" id="editPhone" value="123-456-7890">
                        <small id="phoneError" class="error text-danger"></small>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="submit" class="btn btn-success">Save changes</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>

          </div>
          <div id="orders" class="col-md-9" style="display: none;">
            <!-- Orders Content -->
            <div class="myaccount-content">
              <h3>Orders</h3>

              <!-- Static data as an example -->
              <div class="myaccount-table table-responsive text-center">
                <!-- ORDER HISTORY TABLE STARTS ----------------------------------------------------------------------->
                <div class="p-3"
                style="border: 2px solid rgb(224, 222, 222); background-color: #eeeeee;">
                  <div class="d-flex py-2 mb-2 align-items-center rounded">
                    <div class="product col-4">
                      <!-- Static image -->
                      <img src="static_image.jpg" alt="Product Image" width="150px">


                    </div>

                    <div class="d-grid text-start">
                      <h6>Product Name</h6>
                      <p class="m-0"><small>Color: Color Name & Price: $10</small></p>
                      <p class="m-0"><small>Size: Medium & Quantity: 1</small></p>
                      <p class="m-0"><small>Seller: Seller Name</small></p>
                      <p class="m-0"><small>Expected Delivery: 2024-02-07</small></p>
                      <p class="m-0"><small>Order Status: Delivered</small></p>
                      <p class="m-0"><small>Delivery Address: John Doe, 123 Street, District, ZIP Code, State, Phone
                          Number</small></p>
                    </div>
                  </div>
                  <div class="my-3 ">
                    <!-- Example cancel order button -->
                    <button class="rounded btn btn-danger">Cancel Order</button>
                  </div>
                </div>
                
              </div>
              <!-- End of myaccount-table -->
            </div>
            <!-- End of tab-pane -->

            <!-- End of myaccount-content -->

          </div>
          <div id="addAddress" class="col-md-9" style="display: none;">
            <!-- Address Content -->
            <div class="" id="address-edit" role="tabpanel" aria-labelledby="address-edit-tab">
              <div class="myaccount-content">
                <div class="d-flex justify-content-between">
                  <h3>Addresses</h3>
                  <button type="button" class="text-center" id="addAddressButton"
                    style="color: white; background-color: #81c408; height: 30px; border-radius: 5px; border: 2px;">
                    Add new address
                  </button>
                </div>
                <div class="">
                  <div id="addressList">
                    <!-- Static Address Data -->
                    <div class="my-3 px-4 py-3 form-check rounded d-flex justify-content-between"
                      style="border: 2px solid rgb(223, 223, 223); background-color: rgb(246, 246, 246);">
                      <div>
                        <p class="m-0"><strong>John Doe</strong></p>
                        <p class="m-0">123 Main St</p>
                        <p class="m-0">New York, NY, 10001</p>
                        <p class="m-0">john.doe@example.com</p>
                        <p class="m-0">123-456-7890</p>
                      </div>
                      <!-- Edit and Delete Buttons -->
                      <div class="mt-3 ">
                        <button type="button" class="btn btn-sm border edit-address-btn" data-toggle="modal"
                          data-target="#editAddressModal" data-address-id="address_1">
                          <i class="fas fa-edit text-success"></i>
                        </button>
                        <button type="button" class="btn btn-sm border ml-2 delete-address-btn"
                          data-address-id="address_1">
                          <i class="fas fa-trash text-danger"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Modal for add address -->
                <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalLabel" aria-hidden="true">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">New Address</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <form id="addressForm" class="row g-3" novalidate>
                          <!-- Static Address Form Fields -->
                          <div class="col-12 p-2">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" name="name" class="form-control" id="name" placeholder="Your Name"
                              required>
                          </div>
                          <div class="col-12 p-2">
                            <label for="address" class="form-label">Address</label>
                            <input type="text" name="address" class="form-control" id="address"
                              placeholder="Enter your address" required>
                          </div>
                          <div class="col-md-6 p-2">
                            <label for="district" class="form-label">District</label>
                            <input type="text" name="district" class="form-control" id="district"
                              placeholder="Town or city" required>
                          </div>
                          <div class="col-md-6 p-2">
                            <label for="state" class="form-label">State</label>
                            <input type="text" name="state" class="form-control" id="state"
                              placeholder="Enter your state" required>
                          </div>
                          <div class="col-md-6 p-2">
                            <label for="zip" class="form-label">Zip</label>
                            <input type="text" name="zip" class="form-control" id="zip" placeholder="Zip/Postal"
                              required>
                          </div>
                          <div class="col-md-6 p-2">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" name="phone" class="form-control" id="phone" placeholder="Your Phone"
                              required>
                          </div>
                          <div class="col-12 p-2">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" name="email" class="form-control" id="email" placeholder="Your Email"
                              required>
                          </div>

                          <div class="col-12 pt-3">
                            <button type="button" id="submitAddressBtn" class="btn btn-primary"
                              data-dismiss="modal">Submit</button>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- address modal ends here -->
              </div>
            </div>
            <!-- Your address content goes here -->
          </div>
          <div id="changePassword" class="col-md-9" style="display: none;">
            <!-- Change Password Content -->
            <h1>password</h1>
            <!-- Your change password content goes here -->
          </div>
        </div>
      </div>

      <script>

        // Function to show profile section and hide other sections
        function showProfile() {
          // Show profile section and hide others
          document.getElementById('profile').style.display = 'block';
          document.getElementById('orders').style.display = 'none';
          document.getElementById('addAddress').style.display = 'none';
          document.getElementById('changePassword').style.display = 'none';
          
          // Set active class and remove from others
          setActiveTab('profileTab');
        }

        function showOrders() {
          // Show orders section and hide others
          document.getElementById('profile').style.display = 'none';
          document.getElementById('orders').style.display = 'block';
          document.getElementById('addAddress').style.display = 'none';
          document.getElementById('changePassword').style.display = 'none';
          
          // Set active class and remove from others
          setActiveTab('ordersTab');
        }

        function showAddAddress() {
          // Show add address section and hide others
          document.getElementById('profile').style.display = 'none';
          document.getElementById('orders').style.display = 'none';
          document.getElementById('addAddress').style.display = 'block';
          document.getElementById('changePassword').style.display = 'none';
          
          // Set active class and remove from others
          setActiveTab('addressTab');
        }

        function showChangePassword() {
          // Show change password section and hide others
          document.getElementById('profile').style.display = 'none';
          document.getElementById('orders').style.display = 'none';
          document.getElementById('addAddress').style.display = 'none';
          document.getElementById('changePassword').style.display = 'block';
          
          // Set active class and remove from others
          setActiveTab('passwordTab');
        }

        // Function to set active tab
        function setActiveTab(tabId) {
            // Remove active class from all tabs
            var tabs = document.querySelectorAll('.list-group-item');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            // Add active class to the clicked tab
            document.getElementById(tabId).classList.add('active');
        }

        // Function to toggle sidebar visibility like a modal
        document.getElementById('sidebarModalToggle').addEventListener('click', function () {
          document.getElementById('sidebar').classList.toggle('d-none');
          document.body.classList.toggle('sidebar-modal-open'); // Add a class to body for styling
        });




        // edit profile
        document.getElementById('editProfileButton').addEventListener('click', function () {
          var modal = new bootstrap.Modal(document.getElementById('editProfileModal'));
          modal.show();
        });

        // add address
        document.getElementById('addAddressButton').addEventListener('click', function () {
          var modal = new bootstrap.Modal(document.getElementById('exampleModal'));
          modal.show();
        });

      </script>





      <!-- Include Footer -->
      <%- include('../partials/_footer')%>
        <!-- /Include Footer -->


        <!-- Include layoutFoot -->
        <%- include('../partials/_layoutFoot')%>
        <!-- /Include layoutFoot -->